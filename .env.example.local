# ====================================
# ONLINETEST CONFIGURATION â€” LOCAL DEVELOPMENT
# ====================================
# This file is for running server and testrunner with Node.js on your host
# while dependencies (Redis, PostgreSQL, MinIO) run in Docker.
#
# Copy this file to .env and change all CHANGE_ME passwords before starting.
#
# 1. Start the dependencies (Redis, PostgreSQL, MinIO):
#      docker compose -f docker-compose.dependencies.yml -f standalone/docker-compose.dependencies.standalone.yml up -d
#
# 2. Install and start the server:
#      npm install --prefix server
#      npm start --prefix server
#
# 3. Install and start the testrunner:
#      npm install --prefix testrunner
#      npm start --prefix testrunner

# ====================================
# PASSWORDS
# ====================================
# Change all of these before first start.
# Recommendation: Use at least 16 characters.
#
# IMPORTANT: The Redis password must also be updated in redis-conf/redis.conf
# (the "requirepass" line). Docker Compose mounts that file directly, so the
# password in .env and redis.conf must match.
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
POSTGRESQL_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD
MINIO_PASSWORD=CHANGE_ME_MINIO_PASSWORD
ADMIN_BASICAUTH_PASSWORD=CHANGE_ME_ADMIN_PASSWORD

# ====================================
# REDIS / MESSAGE BROKER
# ====================================
# Points to localhost since Redis runs in Docker with an exposed port.
REDIS_HOST=127.0.0.1
REDIS_DOCKER_VERSION=8.2.2

# ====================================
# DATABASE
# ====================================
# The server code reads "postgresql:server" (not "postgresql:host"),
# so the env var must be POSTGRESQL_SERVER for local Node.js usage.
# In Docker Compose this remapping is done in docker-compose.server.yml.
POSTGRESQL_SERVER=127.0.0.1
POSTGRESQL_USER=sitespeedio
POSTGRESQL_DB=sitespeedio
POSTGRESQL_PORT=5432
POSTGRESQL_DOCKER_VERSION=16.11

# ====================================
# OBJECT STORAGE (MinIO / S3)
# ====================================
MINIO_HOST=127.0.0.1
MINIO_PORT=9000
MINIO_USER=sitespeedio
MINIO_DOCKER_VERSION=RELEASE.2025-09-07T16-13-09Z
MINIO_MC_DOCKER_VERSION=RELEASE.2025-08-13T08-35-41Z

# ====================================
# DOMAIN VALIDATION
# ====================================
# Allow all domains for local development.
VALID_TEST_DOMAINS=.*

# ====================================
# SERVER
# ====================================
LOCALIZATION_LOCALE=en
ADMIN_BASICAUTH_LOGIN=admin
SITESPEED.IO_HTML_HOMEURL="http://127.0.0.1:3000/"

# ====================================
# TESTRUNNER
# ====================================
LOCATION_NAME="default"

# The testrunner defaults (testrunner/config/testrunner.yaml) already point
# S3 and result URLs to 127.0.0.1:9000, so these only need to be set if you
# changed the MinIO port or use a remote S3 endpoint.
# SITESPEED_IO_S3_ENDPOINT="http://127.0.0.1:9000"

# ====================================
# RESULT STORAGE & ACCESS
# ====================================
RESULT_BASE_URL="http://127.0.0.1:9000/sitespeedio"
